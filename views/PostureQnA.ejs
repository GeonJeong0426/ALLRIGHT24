<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ALLRIGHT24</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <%- include('nav.ejs') %>

    <article id="owunwan-article">
      ã€‹ ã€‹ ã€‹&nbsp;&nbsp;&nbsp;&nbsp;<button id="owunwan_write_btn" class="font">ğŸ™‹ğŸ»â€â™‚ ìì„¸ ë¬¼ì–´ë³´ê¸° ğŸ™‹ğŸ»â€â™€</button
      >&nbsp;&nbsp;&nbsp;&nbsp;ã€Š ã€Š ã€Š

      <div class="list-box">
        <% for( let i = 0; i < result.length; i++ ) { %>

        <div class="list">
          <div class="list_content">
            <a href="/PostureQnA/detail/<%= result[i]._id %>">
              <p style="font-size: 1.1vw">ğŸ“Œ <%= result[i].title %></p>
              <br />
              <p style="font-size: 0.9vw"><%= result[i].content %></p>
            </a>
          </div>
          <div class="list_btn">
            <a id="edit_btn" href="/PostureQnA_edit/<%= result[i]._id %>"> âœï¸ ìˆ˜ì •í•˜ê¸°</a>&nbsp;&nbsp;
            <span id="del_btn" class="delete_btn" data-id="<%= result[i]._id %>">ğŸ—‘ï¸ ì‚­ì œí•˜ê¸°</span>
          </div>
        </div>

        <% } %>
      </div>
    </article>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
      document.getElementById("owunwan_write_btn").addEventListener("click", () => {
        window.location.href = "/PostureQnAWrite";
      });

      document.querySelectorAll(".delete_btn").forEach((button) => {
        button.addEventListener("click", (e) => {
          Swal.fire({
            title: "ê²Œì‹œê¸€ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?",
            // text: "You won't be able to revert this!",
            icon: "warning",
            showCancelButton: true,
            confirmButtonColor: "#3085d6",
            cancelButtonColor: "#d33",
            confirmButtonText: "ì‚­ì œí•˜ê¸°",
            cancelButtonText: "ì·¨ì†Œ",
          }).then((result) => {
            if (result.isConfirmed) {
              //ì‚­ì œí•˜ê¸° ëˆ„ë¥´ë©´
              fetch("/PostureQnA_delete/" + e.target.dataset.id, {
                method: "DELETE",
              });
              location.reload();
            }
          });
        });
      });
    </script>
  </body>
</html>
